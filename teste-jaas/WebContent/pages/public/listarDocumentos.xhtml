<ui:composition 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="/pages/templates/template.xhtml">
	
<ui:define name="content">

<h:body>

	<h:form id="formPrincipal">
 
        <p:messages />
        
        <p:outputLabel for="codigoCliente" value="#{msgs.documentoCodigoCliente}" />
        <p:inputText id="codigoCliente" value="#{documentoBean.codigoCliente}" />

		<p:commandButton value="Listar" update="tabelaDocumentos" actionListener="#{documentoBean.obterListaDeDocumentos}" />
		
        <p:dataTable id="tabelaDocumentos" value="#{documentoBean.listaDeDocumentos}" var="documento">
            <p:column>
                <f:facet name="header">
                    #{msgs.documentoTipoDocumento}
                </f:facet>
 
                #{documento.tipoDocumento.nomeTipo}
            </p:column>
            <p:column>
                <f:facet name="header">
                    #{msgs.documentoTitulo}
                </f:facet>
 
                #{documento.titulo}
            </p:column>
            <p:column>
                <f:facet name="header">
                    #{msgs.documentoDescricao}
                </f:facet>
 
                #{documento.descricao}
            </p:column>
            <p:column>
                <f:facet name="header">
                    #{msgs.documentoUsuarioCriacao}
                </f:facet>
 
                #{documento.usuarioCriacao.login}
            </p:column>
            <p:column>
                <f:facet name="header">
                    #{msgs.documentoDataCriacao}
                </f:facet>
 
 				<h:outputLabel value="#{documento.dataInclusao.time}">
         			<f:convertDateTime pattern="dd-MM-yyyy HH:mm:ss" />
      			</h:outputLabel>
            </p:column>
			<p:column>
                <f:facet name="header">
                    #{msgs.documentoUsuarioAlteracao}
                </f:facet>
 
                #{documento.usuarioAlteracao.login}
            </p:column>
            <p:column>
                <f:facet name="header">
                    #{msgs.documentoDataAlteracao}
                </f:facet>
 
 				<h:outputLabel value="#{documento.dataAlteracao.time}">
         			<f:convertDateTime pattern="dd-MM-yyyy HH:mm:ss" />
      			</h:outputLabel>
            </p:column>
            <p:column>
                <p:panel columns="3">
                    <p:commandButton update=":#{p:component('formAlterar')}" oncomplete="PF('dialogAlterar').show()" immediate="true" title="#{msgs.atualizar}" icon="ui-icon-trash" rendered="#{loginBean.usuarioDigitador}" >
                        <f:setPropertyActionListener target="#{documentoBean.documento}" value="#{documento}" />
                    </p:commandButton>
                    <p:commandButton update=":#{p:component('formDeletar')}" oncomplete="PF('dialogDeletar').show()" immediate="true" title="#{msgs.deletar}" icon="ui-icon-trash" rendered="#{loginBean.usuarioDigitador}" >
                        <f:setPropertyActionListener target="#{documentoBean.documento}" value="#{documento}" />
                    </p:commandButton>
					<p:commandButton update=":#{p:component('formAnexar')}" oncomplete="PF('dialogAnexar').show()" immediate="true" title="#{msgs.incluirArquivoAnexo}" icon="ui-icon-trash" rendered="#{loginBean.usuarioDigitador}" >
                        <f:setPropertyActionListener target="#{documentoBean.documento}" value="#{documento}" />
                    </p:commandButton>
                	<h:inputHidden value="#{documento.id}" />
                </p:panel>
            </p:column>
        </p:dataTable>
        <p:commandButton actionListener="#{documentoBean.incluirDocumentoInicio}" oncomplete="PF('dialogIncluir').show()" immediate="true" value="#{msgs.incluir}" icon="ui-icon-star" rendered="#{loginBean.usuarioDigitador}" >
            <f:setPropertyActionListener target="#{documentoBean.documento}" value="#{documento}" />
        </p:commandButton> 
    </h:form>
    	
</h:body>

</ui:define>

</ui:composition>